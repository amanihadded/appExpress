<!DOCTYPE html>
<html lang="en" data-bs-theme="auto">
  <head>
    <script src="./js/color-modes.js"></script>
    <link
      rel="stylesheet"
      href="./bootstrap-icons-1.10.5/font/bootstrap-icons.min.css"
    />
    <link rel="shortcut icon" href="./img/ali.png" type="image/x-icon">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta
      name="author"
      content="Mark Otto, Jacob Thornton, and Bootstrap contributors"
    />
    <meta name="generator" content="Hugo 0.112.5" />
    <title>dashbord page</title>

    <link href="./css/bootstrap.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="css/dark-light.css">
    <link rel="stylesheet" href="css/dashbord.css">

    <!-- Custom styles for this template -->
    <link href="./css/sidebars.css" rel="stylesheet" />
    <link rel="stylesheet" href="./css/myStyle.css" />
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
  </head>
  <body>
    <%- include('./components/dark-light.ejs') %>
 
    <main class="d-flex flex-nowrap">
      <%- include('./components/sidebar.ejs', { currentPage : "dashbord" }) %>

      <div class="b-example-divider b-example-vr"></div>

      <section class="w-100">

        <div class="container">
            <div class="row row-cols-1 row-cols-md-2 row-cols-xl-4">
                   
                  <div class="col"> 
                    <div class="card radius-10 border-start border-0 border-3 border-info">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <div>
                                    <p class="mb-0 text-secondary">Total Customers</p>
                                    <h4 class="my-1 text-info customer-count">0</h4>
                                    <p class="mb-0 font-13">Updated daily</p>
                                </div>
                                <div class="widgets-icons-2 rounded-circle bg-gradient-scooter text-white ms-auto">
                                    <i class="fa fa-users"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card radius-10 border-start border-0 border-3 border-warning">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <div>
                                    <p class="mb-0 text-secondary">Total Products</p>
                                    <h4 class="my-1 text-warning product-count">0</h4>
                                    <p class="mb-0 font-13">Updated daily</p>
                                </div>
                                <div class="widgets-icons-2 rounded-circle bg-gradient-blooker text-white ms-auto">
                                  <i class="fa fa-shopping-cart"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col">
                  <div class="card radius-10 border-start border-0 border-3 border-info">
                     <div class="card-body">
                         <div class="d-flex align-items-center">
                             <div>
                                 <p class="mb-0 text-secondary">Total Orders</p>
                                 <h4 class="my-1 text-info">4805</h4>
                                 <p class="mb-0 font-13">+2.5% from last week</p>
                             </div>
                             <div class="widgets-icons-2 rounded-circle bg-gradient-scooter text-white ms-auto"><i class="fa fa-shopping-cart"></i>
                             </div>
                         </div>
                     </div>
                  </div>
                </div>

                <div class="col">
                  <div class="card radius-10 border-start border-0 border-3 border-success">
                     <div class="card-body">
                         <div class="d-flex align-items-center">
                             <div>
                                 <p class="mb-0 text-secondary">Bounce Rate</p>
                                 <h4 class="my-1 text-success">34.6%</h4>
                                 <p class="mb-0 font-13">-4.5% from last week</p>
                             </div>
                             <div class="widgets-icons-2 rounded-circle bg-gradient-ohhappiness text-white ms-auto"><i class="fa fa-bar-chart"></i>
                             </div>
                         </div>
                     </div>
                  </div>
                  
            </div>
        
      </section>
      
    </main>
    <script>
      // Récupérer le nombre de clients
      async function getCustomerCount() {
          const response = await fetch('/customers/count');
          const data = await response.json();
          return data.count;
      }

      // Récupérer le nombre de produits
      async function getProductCount() {
          const response = await fetch('/products/count');
          const data = await response.json();
          return data.count;
      }

      // Mettre à jour la carte avec les données
      async function updateDashboard() {
          const customerCount = await getCustomerCount();
          const productCount = await getProductCount();

          document.querySelector('.customer-count').textContent = customerCount; // Modifiez le sélecteur selon vos besoins
          document.querySelector('.product-count').textContent = productCount; // Modifiez le sélecteur selon vos besoins
      }

      // Appelez la fonction pour mettre à jour le tableau de bord
      updateDashboard();
  </script>
    <script src="./js/bootstrap.bundle.min.js"></script>

    <script src="./js/sidebars.js"></script>

    <script src="./js/main.js"></script>
  </body>
</html>
